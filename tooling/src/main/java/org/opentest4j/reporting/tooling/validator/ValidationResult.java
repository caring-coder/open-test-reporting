package org.opentest4j.reporting.tooling.validator;

import java.util.Iterator;
import java.util.List;
import java.util.Objects;

import static java.util.stream.Collectors.joining;

public class ValidationResult implements Iterable<ValidationMessage> {

    private final List<ValidationMessage> messages;

    ValidationResult(List<ValidationMessage> messages) {
        this.messages = List.copyOf(messages);
    }

    public long count(Severity severity) {
        return messages.stream().filter(m -> severity.equals(m.getSeverity())).count();
    }

    @Override
    public Iterator<ValidationMessage> iterator() {
        return messages.iterator();
    }

    @Override
    public String toString() {
        return messages.stream()
                .map(Objects::toString)
                .collect(joining("\n"));
    }
}
